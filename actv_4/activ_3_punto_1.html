<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eemplo 6 Uso Objetos</title>
    <style>
        body{
            background-color:#a2d2ff ;
            color: #2c2c2c;
            font-size: 20px;
            font-family: Arial, Helvetica, sans-serif;
        }
        table,td,th {
            border: 1px solid rgba(0, 0, 0, 0.884);
            margin: 10px auto;
        }
        table {
            background: #188FA7;
            border-collapse: collapse;
            width: auto;
        }
        td, th {
            padding: 10px;
            color: #ffffff;
            text-align: center;
        }
        th{
            background: #8d6ba8;
        }
    </style>
</head>
<body>
    <center>
        <br>
        <h1>ARRAY DE OBJETOS DE ESTUDIANTE</h1>
        <br>
        <br>
        <table>
            <tr>
                <td>Nombre</td>
                <td><input type="text" name="nom" id="nom" required></td>
            </tr>
            <tr>
                <td>Apellido</td>
                <td><input type="text" name="ape" id="ape"required></td>
            </tr>
            <tr>
                <td>Nota 1</td>
                <td><input type="text" name="not1" id="not1"required></td> 
            </tr>
            <tr>
                <td>Nota 2</td>
                <td><input type="text" name="not2" id="not2"required></td> 
            </tr>
            <tr>
                <td>Nota 3</td>
                <td><input type="text" name="not3" id="not3"required></td> 
            </tr>
            
        </table>


        <table>
            <tr><td><button onclick="registrarNotas()">Registrar Notas</button></td></tr>
        </table>
        <br>
        <h2>Listado de calificaciones</h2>
        <table>
            <th>Nombre</th><th>Apellido</th><th>Nota 1</th><th>Nota 2</th><th>Nota 3</th><th>Nota Final</th><th>Estado</th></th><th>Reconocimento</th>
            <tbody id="cuerpo"></tbody>
            
        </table>
        <br>
        <h2>Análisis de los resultados del curso</h2>
        <table>
            <th>Prom. del curso</th><th>N° Est. Aprob.</th><th>N° Est. Reprob.</th><th>Est. Defic.</th><th>Est. Insuf.</th><th>Est. Bueno</th><th>Est. Acept.</th><th>Est. Sobresal.</th><th>Est. Exelet.</th>
            <tbody id="analisis"></tbody>
        </table>
    </center>


    <!-- -------------------------------------------------------------------------------------------------- -->
    <script>
        var myArrayNotas =[];

        var notas={
            "nombre":null,
            "apellido":null,
            "nota1":null,
            "nota2":null,
            "nota3":null
        }
        var estad ='';
        var salidaDos ='';
        var esAprb ="";
        var esRep ="";
        var esDef ="";
        var esIns ="";
        var esBue ="";
        var esAcep ="";
        var esSobr ="";
        var esExel ="";
        var promedioCurso =promCurso();
        
        function registrarNotas(){
            notas.nombre=document.getElementById('nom').value;
            notas.apellido=document.getElementById('ape').value;
            notas.nota1=parseFloat(document.getElementById('not1').value);
            notas.nota2=parseFloat(document.getElementById('not2').value);
            notas.nota3=parseFloat(document.getElementById('not3').value);
            let resultado = JSON.parse(JSON.stringify(notas));
            myArrayNotas.push(resultado);
            ListadoNot();
            resultados();
            limpiarCajas();
        }
        
        
        function ListadoNot(){
            var salida="";
            for(i in myArrayNotas){
                var notaFinal=nf(myArrayNotas[i].nota1,myArrayNotas[i].nota2,myArrayNotas[i].nota3);
                salida+='<tr><td>'+myArrayNotas[i].nombre+'</td><td>'+ myArrayNotas[i].apellido+'</td><td>'+myArrayNotas[i].nota1+'</td><td>'+myArrayNotas[i].nota2+'</td><td>'+ myArrayNotas[i].nota3+'</td><td><font color="'+color(notaFinal)+'">'+ notaFinal.toFixed(1) + '</td><td bgcolor="'+color(notaFinal)+'">'+aprRepr(notaFinal)+ '</td><td>'+ valoracion(notaFinal)+ '</td></tr>';
            }
            document.getElementById('cuerpo').innerHTML=salida;
        }
        
        
        function limpiarCajas(){
            document.getElementById('nom').value='';
            document.getElementById('ape').value='';
            document.getElementById('not1').value='';
            document.getElementById('not2').value='';
            document.getElementById('not3').value='';
        }
        
        
        function nf(n1,n2,n3){
            return (n1+n2+n3)/3;
        }

        function color(notaFinal){
            if (notaFinal >=3){
                return "#002EEB";
            }else {
                return"#BA1F33";
            }
        }

        function aprRepr(notaFinal){
            if (notaFinal >=2.96){ // redondear 
                esAprb++;
                return "APROBADO";
            }else {
                esRep++;
                return"REPROBADO";
            }
        }

        function valoracion(notaFinal){
            if (notaFinal >=0 && notaFinal <1){
                esDef++;
                return "Deficiente";
            }else if(notaFinal >= 1.0 && notaFinal <2.95){ 
                esIns++;
                return "Insuficiente";
            }else if(notaFinal >= 2.96 && notaFinal <= 3.5){  //redondeando devido a -> .tofixed()
                esBue++;
                return "Bueno";
            }else if (notaFinal >=3.6 && notaFinal <= 4.0){
                esAcep++;
                return "aceptable";
            }else if(notaFinal >= 4.0 && notaFinal <= 4.5){
                esSobr++;
                return "Sobresaliente";
            }else if(notaFinal >= 4.6 && notaFinal <= 5.0){
                esExel++;
                return "Exelente";
            }else {
                return "Notas mal digitadas";
            }
        }
// ---------------------   salida punto 2 -------------------
        function resultados(){
        //         //  9 filas 
            salidaDos= '<tr><td>'+ promedioCurso.toFixed(1) + '</td><td>'+ esAprb + '</td><td>'+ esRep + '</td><td>'+ esDef + '</td><td>'+ esIns + '</td><td>'+ esBue + '</td><td>'+ esAcep + '</td><td>'+ esSobr + '</td><td>'+ esExel + '</td></tr>';

            document.getElementById('analisis').innerHTML=salidaDos;
        }
        function promCurso(){
            var sum = 0;
            for (i in myArrayNotas){
                sum+= nf(myArrayNotas[i].nota1,myArrayNotas[i].nota2,myArrayNotas[i].nota3);
            }
            return (sum/(myArrayNotas.length));
        }



        </script>
    
</body>
</html>